app_name: LINE家計簿
version: 1.0.0
description: LINEとGoogle Spreadsheetを連携した家計簿管理アプリケーション

system_requirements:
  platform: Node.js
  framework: Hono.js
  target_development_time: 1-2週間
  approach: LINE Bot + Google Sheets連携

core_features:
  - name: LINE Bot
    description: LINEを通じた家計簿データの入力
    components:
      - @line/bot-sdk
    message_format:
      - pattern: "[金額] [カテゴリー] [メモ]"
      - example: "1000 食費 コンビニ"

  - name: 収入登録
    description: LINEを通じた収入データの登録
    message_format:
      - pattern: "収入 [金額] [収入種別] [取引先] [メモ]"
      - example: "収入 250000 給与 株式会社ABC 1月分給与"
    categories:
      - 事業収入
      - 給与
      - 副収入
      - その他収入
    data_structure:
      - transactionId: String  # 取引ID（自動採番）
      - date: Date            # 取引日
      - category: String      # 収入種別
      - amount: Number        # 金額
      - client: String        # 取引先
      - memo: String          # 備考

  - name: 支出記録
    description: Google Spreadsheetsへの自動記録
    implementation:
      - Google Sheets API
      - データの自動整理・分類
    data_structure:
      - 日付
      - 金額
      - カテゴリー
      - メモ
      - 登録時間

  - name: レポート生成
    description: 月次支出レポートの自動生成と送信
    features:
      - カテゴリー別集計
      - 月次比較
      - グラフ生成
      - LINEでの結果表示

technical_stack:
  backend:
    - Hono.js
    - TypeScript
    - @hono/node-server
    - @line/bot-sdk
    - googleapis

  integrations:
    - name: LINE Messaging API
      use_cases:
        - メッセージ受信・解析
        - レスポンス送信
        - Webhook処理
      benefits:
        - リアルタイム入力
        - 使いやすいインターフェース
        - プッシュ通知対応

    - name: Google Sheets API
      use_cases:
        - データ記録
        - 集計処理
        - レポート生成
      benefits:
        - データの可視化
        - 手動編集可能
        - 共有機能

project_structure:
  src:
    - index.ts (メインアプリケーション)
    config:
      - line.ts (LINE Bot設定)
      - sheets.ts (Google Sheets設定)
    handlers:
      - webhook-handler.ts (Webhook処理)
      - line-message.ts (メッセージ処理)
    routes:
      - webhook.ts (Webhookルーター)
    services:
      - sheets.ts (Google Sheets操作)

data_structure:
  spreadsheet:
    sheets:
      - income:
          - transactionId: String  # 取引ID
          - date: Date            # 取引日
          - category: String      # 収入種別
          - amount: Number        # 金額
          - client: String        # 取引先
          - memo: String          # 備考

      - transactions:
          - date: Date
          - amount: Number
          - category: String
          - memo: String
          - timestamp: DateTime

      - categories:
          - name: String
          - budget: Number

      - monthly_reports:
          - year: Number
          - month: Number
          - total: Number
          - category_totals: Object

deployment:
  platform: Node.js
  hosting: 
    options:
      - Google Cloud Run
      - Render
      - Railway
  requirements:
    - HTTPS対応
    - 常時起動
    - 環境変数管理